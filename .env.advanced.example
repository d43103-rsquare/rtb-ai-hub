# ============================================================================
# ADVANCED CONFIGURATION (선택사항)
# ============================================================================
# 고급 기능 설정 (멀티 환경, 리포 라우팅, MCP 엔드포인트 오버라이드)
# 
# 이 파일은 선택사항입니다. 기본값으로도 동작합니다.
# 복사 방법: cp .env.advanced.example .env.advanced
# ============================================================================

# ─── Multi-Environment Credentials ─────────────────────────────────────────
# 환경별(int/stg/prd) 다른 자격증명 사용 시 설정
# 설정하지 않으면 .env.services의 기본 자격증명 사용

# INT Environment
# INT_JIRA_HOST=dev-org.atlassian.net
# INT_JIRA_EMAIL=dev@company.com
# INT_JIRA_API_TOKEN=dev-token
# INT_JIRA_PROJECT_KEY=DEV-PROJ
# INT_FIGMA_ACCESS_TOKEN=dev-figma-token
# INT_GITHUB_TOKEN=ghp_dev-token
# INT_GITHUB_REPO=org/dev-repo
# INT_DD_API_KEY=dev-dd-key
# INT_DD_APP_KEY=dev-dd-app-key

# STG Environment
# STG_JIRA_HOST=staging-org.atlassian.net
# STG_JIRA_EMAIL=staging@company.com
# STG_JIRA_API_TOKEN=stg-token
# STG_JIRA_PROJECT_KEY=STG-PROJ
# STG_FIGMA_ACCESS_TOKEN=stg-figma-token
# STG_GITHUB_TOKEN=ghp_stg-token
# STG_GITHUB_REPO=org/staging-repo
# STG_DD_API_KEY=stg-dd-key
# STG_DD_APP_KEY=stg-dd-app-key

# PRD Environment (QueryPie 사용 권장)
# 기본 자격증명(.env.services)을 prd로 사용하는 것이 일반적

# ─── Multi-Repository Routing ───────────────────────────────────────────────
# MSA 멀티 리포지토리 환경에서 Jira Component별 라우팅 설정

# Jira Component → GitHub Repo 매핑 (콤마 구분)
# 예: Backend 컴포넌트는 be-api 레포로, Frontend는 fe-app 레포로
# REPO_ROUTING_REPOS=Backend=org/be-api,Frontend=org/fe-app,Infrastructure=org/infra

# Environment → Base Branch 매핑 (콤마 구분)
# 기본값: int=develop,stg=staging,prd=main
# REPO_ROUTING_BRANCHES=int=develop,stg=staging,prd=main

# ─── MCP Server Endpoints (로컬 개발용) ────────────────────────────────────
# Docker 내부에서는 자동 설정됨. 로컬 개발 시만 오버라이드:
# MCP_JIRA_INT_ENDPOINT=http://localhost:3010
# MCP_FIGMA_INT_ENDPOINT=http://localhost:3011
# MCP_GITHUB_INT_ENDPOINT=http://localhost:3012
# MCP_DATADOG_INT_ENDPOINT=http://localhost:3013

# MCP_JIRA_STG_ENDPOINT=http://localhost:3020
# MCP_FIGMA_STG_ENDPOINT=http://localhost:3021
# MCP_GITHUB_STG_ENDPOINT=http://localhost:3022
# MCP_DATADOG_STG_ENDPOINT=http://localhost:3023

# ─── Target Repo CI (AI가 생성한 코드 검증) ──────────────────────────────────
# 대상 레포 스택에 맞게 명령어를 설정하세요.
# 설정하지 않은 단계는 스킵됩니다.

# TARGET_CI_ENABLED=true
# TARGET_CI_INSTALL_CMD=pnpm install
# TARGET_CI_LINT_CMD=pnpm lint
# TARGET_CI_TYPECHECK_CMD=pnpm typecheck
# TARGET_CI_TEST_CMD=pnpm test
# TARGET_CI_BUILD_CMD=pnpm build
# TARGET_CI_MAX_RETRIES=2

# ─── Target Repo CD (Docker Compose 로컬 배포) ──────────────────────────────
# PR merge 후 branch polling/webhook이 감지하면 자동으로 서비스를 순차 교체합니다.
# AI workflow에서는 CD를 실행하지 않습니다 (human merge 이후에만 동작).

# TARGET_CD_ENABLED=false
# TARGET_CD_COMPOSE_FILE=docker-compose.yml
# TARGET_CD_SERVICES=api,web,worker
# TARGET_CD_HEALTH_TIMEOUT=60
# TARGET_CD_HEALTH_INTERVAL=3

# ─── Local Polling (로컬 개발용 — 10초 기본) ──────────────────────────────────
# DEV_MODE=true이면 자동 활성화. 서버 환경에서는 webhook 사용.
# Branch polling: develop/release/*/main 변경 감지 → CD 트리거
# Jira polling: 지정 프로젝트의 이슈 상태 변경 감지 → AI 워크플로우 트리거

# LOCAL_POLLING_ENABLED=true
# POLLING_INTERVAL_MS=10000

# ─── Jira Polling (로컬 개발용 — Jira webhook 대체) ──────────────────────────
# Jira REST API를 직접 호출하여 이슈 변경을 감지합니다.
# JIRA_HOST, JIRA_EMAIL, JIRA_API_TOKEN, JIRA_PROJECT_KEY 필요 (.env.services 참조)

# JIRA_POLLING_INTERVAL_MS=10000
# JIRA_POLLING_TRIGGER_STATUS=In Progress
# JIRA_POLLING_TRIGGER_LABEL=auto-dev-enabled

# ─── OpenClaw Integration (알림 + 대화형 트리거) ─────────────────────────────
# OpenClaw Gateway를 통해 Slack으로 워크플로우 알림을 보내고,
# Slack에서 대화형으로 워크플로우를 트리거할 수 있습니다.
# Docker: docker compose --profile openclaw up

# OPENCLAW_NOTIFY_ENABLED=true
# OPENCLAW_GATEWAY_URL=http://openclaw-gateway:18789
# OPENCLAW_HOOKS_TOKEN=your-shared-secret
# OPENCLAW_NOTIFY_CHANNEL=C0123456789

# Slack 설정 (OpenClaw Gateway 컨테이너에서 사용)
# SLACK_BOT_TOKEN=xoxb-...
# SLACK_APP_TOKEN=xapp-...
